<div class="view-products-dialog">
  <div class="dialog-header d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0">Products for Purchase</h4>
    <button type="button" class="close-btn" aria-label="Close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="dialog-content">
    <table class="table table-hover table-bordered table-striped mb-0">
      <thead class="table-light">
        <tr>
          <th>Product Name</th>
          <!-- <th>SKU</th> -->
          <th>Batch No</th>
          <th>Unit Cost</th>
          <th>Sale Price</th>
          <th>Qty</th>
          <th>Total Cost</th>
          <th>Returned Qty</th>
          <th>Returned Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of data.products">
          <td>{{ product.vehicle?.make || '-' }} {{ product.vehicle?.model || '-' }} {{ product.vehicle?.year || '-' }} {{ product.productName || product.product_name || 'N/A' }}</td>
          <!-- <td>{{ product.sku || product.SKU || 'N/A' }}</td> -->
          <td>{{ product.batchNo || product.batch_no || 'N/A' }}</td>
          <td>{{ product.unitCost !== undefined ? product.unitCost : (product.cost !== undefined ? product.cost : 'N/A') }}</td>
          <td>{{ product.salePrice !== undefined ? product.salePrice : (product.sale_price !== undefined ? product.sale_price : 'N/A') }}</td>
          <td>{{ product.purchaseQty || 'N/A' }}</td>
          <td>{{ (product.unitCost && product.purchaseQty) ? (product.unitCost * product.purchaseQty) : 'N/A' }}</td>
          <td>{{ product.refundedQty != null ? product.refundedQty : 0 }}</td>
          <td>{{ (product.refundedAmount != null ? product.refundedAmount : 0) | number:'1.2-2' }}</td>
        </tr>
        <tr *ngIf="!data.products || data.products.length === 0">
          <td colspan="9" class="text-center text-muted">No products found for this purchase.</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="dialog-actions d-flex justify-content-end mt-3">
    <button type="button" class="btn btn-primary" (click)="close()">Close</button>
  </div>
</div>
